<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electronics Inventory Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        .spin { animation: spin 1s linear infinite; }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .shadow-custom {
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        @media (max-width: 768px) {
            .mobile-text { font-size: 0.875rem; }
            .mobile-padding { padding: 1rem; }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div id="app"></div>

    <script>
        var APP_PASSWORD = 'IV9769806390D';
        var SUPABASE_URL = '';
        var SUPABASE_KEY = '';
        
        var categories = ['Microcontroller', 'Display', 'Sensor', 'LED', 'Resistor', 'Capacitor', 'IC', 'Module', 'Buzzer', 'Motor', 'Power Supply', 'Transistor', 'Diode', 'Other'];

        var state = {
            components: [],
            searchTerm: '',
            filterCategory: 'All',
            isAuthenticated: false,
            loading: false,
            showAddModal: false,
            showSetupModal: false,
            editingId: null,
            dbConfig: { url: SUPABASE_URL, key: SUPABASE_KEY },
            formData: { name: '', category: 'Microcontroller', value: '', quantity: '', location: '', notes: '', datePurchased: '' }
        };

        function init() {
            var auth = sessionStorage.getItem('auth');
            var savedConfig = localStorage.getItem('dbConfig');
            
            if (SUPABASE_URL && SUPABASE_KEY) {
                state.dbConfig = { url: SUPABASE_URL, key: SUPABASE_KEY };
                localStorage.setItem('dbConfig', JSON.stringify(state.dbConfig));
            } else if (savedConfig) {
                state.dbConfig = JSON.parse(savedConfig);
            }
            
            if (auth === 'true') {
                state.isAuthenticated = true;
                if (state.dbConfig.url && state.dbConfig.key) {
                    loadFromDatabase();
                }
            }
            render();
        }

        function loadFromDatabase() {
            state.loading = true;
            render();
            
            fetch(state.dbConfig.url + '/rest/v1/components?select=*&order=id.desc', {
                headers: { 'apikey': state.dbConfig.key, 'Authorization': 'Bearer ' + state.dbConfig.key }
            }).then(function(r) {
                if (r.ok) return r.json();
                alert('Failed to connect to database');
                throw new Error('DB Error');
            }).then(function(data) {
                state.components = data;
                state.loading = false;
                render();
            }).catch(function() {
                state.loading = false;
                render();
            });
        }

        function saveToDatabase(component, method, id) {
            method = method || 'POST';
            state.loading = true;
            render();
            
            var url = method === 'PATCH' ? state.dbConfig.url + '/rest/v1/components?id=eq.' + id : state.dbConfig.url + '/rest/v1/components';
            
            fetch(url, {
                method: method,
                headers: { 'apikey': state.dbConfig.key, 'Authorization': 'Bearer ' + state.dbConfig.key, 'Content-Type': 'application/json', 'Prefer': 'return=representation' },
                body: JSON.stringify(component)
            }).then(function(r) {
                if (r.ok) loadFromDatabase();
                else { alert('Failed to save'); state.loading = false; render(); }
            }).catch(function() {
                alert('Error saving');
                state.loading = false;
                render();
            });
        }

        function deleteFromDatabase(id) {
            if (!confirm('Delete this component?')) return;
            state.loading = true;
            render();
            
            fetch(state.dbConfig.url + '/rest/v1/components?id=eq.' + id, {
                method: 'DELETE',
                headers: { 'apikey': state.dbConfig.key, 'Authorization': 'Bearer ' + state.dbConfig.key }
            }).then(function(r) {
                if (r.ok) loadFromDatabase();
                else { alert('Failed to delete'); state.loading = false; render(); }
            });
        }

        function handleLogin() {
            var pw = document.getElementById('password').value;
            if (pw === APP_PASSWORD) {
                state.isAuthenticated = true;
                sessionStorage.setItem('auth', 'true');
                if (state.dbConfig.url) loadFromDatabase();
                else { state.showSetupModal = true; render(); }
            } else {
                alert('Incorrect password!');
            }
        }

        function saveDbConfig() {
            if (!state.dbConfig.url || !state.dbConfig.key) {
                alert('Please fill in both fields');
                return;
            }
            localStorage.setItem('dbConfig', JSON.stringify(state.dbConfig));
            state.showSetupModal = false;
            loadFromDatabase();
        }

        function handleAddComponent() {
            if (!state.formData.name || !state.formData.quantity) {
                alert('Please fill name and quantity');
                return;
            }
            var comp = {
                name: state.formData.name,
                category: state.formData.category,
                value: state.formData.value || null,
                quantity: parseInt(state.formData.quantity),
                location: state.formData.location || null,
                notes: state.formData.notes || null,
                date_purchased: state.formData.datePurchased || null,
                date_added: new Date().toISOString()
            };
            saveToDatabase(comp);
            resetForm();
        }

        function handleUpdateComponent() {
            var comp = {
                name: state.formData.name,
                category: state.formData.category,
                value: state.formData.value || null,
                quantity: parseInt(state.formData.quantity),
                location: state.formData.location || null,
                notes: state.formData.notes || null,
                date_purchased: state.formData.datePurchased || null
            };
            saveToDatabase(comp, 'PATCH', state.editingId);
            resetForm();
        }

        function handleEditClick(id) {
            var comp = null;
            for (var i = 0; i < state.components.length; i++) {
                if (state.components[i].id === id) { comp = state.components[i]; break; }
            }
            if (!comp) return;
            state.formData = {
                name: comp.name,
                category: comp.category,
                value: comp.value || '',
                quantity: comp.quantity.toString(),
                location: comp.location || '',
                notes: comp.notes || '',
                datePurchased: comp.date_purchased || ''
            };
            state.editingId = comp.id;
            state.showAddModal = true;
            render();
        }

        function resetForm() {
            state.formData = { name: '', category: 'Microcontroller', value: '', quantity: '', location: '', notes: '', datePurchased: '' };
            state.editingId = null;
            state.showAddModal = false;
            render();
        }

        function getLowStockCount() {
            var cnt = 0;
            for (var i = 0; i < state.components.length; i++) {
                if (state.components[i].quantity <= 5) cnt++;
            }
            return cnt;
        }

        function getFilteredComponents() {
            var filtered = [];
            for (var i = 0; i < state.components.length; i++) {
                var c = state.components[i];
                var matchSearch = c.name.toLowerCase().indexOf(state.searchTerm.toLowerCase()) !== -1 || (c.value && c.value.toLowerCase().indexOf(state.searchTerm.toLowerCase()) !== -1);
                var matchCat = state.filterCategory === 'All' || c.category === state.filterCategory;
                if (matchSearch && matchCat) filtered.push(c);
            }
            return filtered;
        }

        function esc(txt) {
            var div = document.createElement('div');
            div.textContent = txt;
            return div.innerHTML;
        }

        function render() {
            var app = document.getElementById('app');
            if (!state.isAuthenticated) {
                app.innerHTML = '<div class="min-h-screen flex items-center justify-center p-4 md:p-8"><div class="glass rounded-2xl shadow-custom p-6 md:p-10 w-full max-w-md fade-in"><div class="flex justify-center mb-6"><div class="w-20 h-20 rounded-full gradient-bg flex items-center justify-center"><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/></svg></div></div><h1 class="text-2xl md:text-3xl font-bold text-center mb-2 text-gray-800">Electronics Inventory</h1><p class="text-center text-gray-600 mb-6 text-sm md:text-base">Manage your components with ease</p><input type="password" id="password" placeholder="Enter Password" class="w-full px-4 py-3 md:py-4 border-2 border-gray-200 rounded-xl mb-4 focus:outline-none focus:border-purple-500 transition-colors text-base" onkeypress="if(event.key===\'Enter\')handleLogin()"/><button onclick="handleLogin()" class="w-full gradient-bg text-white py-3 md:py-4 rounded-xl hover:opacity-90 font-semibold transition-all transform hover:scale-105 text-base md:text-lg shadow-lg">Login</button></div></div>';
                return;
            }

            var filtered = getFilteredComponents();
            var lowStock = getLowStockCount();
            var rows = '';
            
            if (state.loading) {
                rows = '<tr><td colspan="6" class="px-4 py-8 text-center text-gray-500"><div class="flex justify-center items-center gap-2"><svg class="w-5 h-5 spin text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-width="4" stroke-dasharray="31.4 31.4" opacity="0.25"/><path d="M4 12a8 8 0 018-8" stroke-width="4" stroke-linecap="round"/></svg>Loading...</div></td></tr>';
            } else if (filtered.length === 0) {
                rows = '<tr><td colspan="6" class="px-4 py-12 text-center text-gray-500"><div class="flex flex-col items-center"><svg class="w-16 h-16 text-gray-300 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/></svg><p class="text-base md:text-lg">No components found</p><p class="text-sm text-gray-400 mt-1">Start by adding your first component</p></div></td></tr>';
            } else {
                for (var i = 0; i < filtered.length; i++) {
                    var c = filtered[i];
                    rows += '<tr class="border-b border-gray-100 hover:bg-purple-50 transition-colors"><td class="px-3 md:px-4 py-3 md:py-4"><div class="font-semibold text-gray-800 text-sm md:text-base">' + esc(c.name) + '</div></td><td class="px-3 md:px-4 py-3 md:py-4"><span class="inline-block px-2 md:px-3 py-1 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-full text-xs md:text-sm font-medium">' + esc(c.category) + '</span></td><td class="px-3 md:px-4 py-3 md:py-4 text-sm md:text-base text-gray-600">' + (c.value ? esc(c.value) : '-') + '</td><td class="px-3 md:px-4 py-3 md:py-4"><span class="inline-flex items-center justify-center min-w-[2.5rem] px-2 md:px-3 py-1 rounded-lg font-bold text-sm md:text-base ' + (c.quantity <= 5 ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700') + '">' + c.quantity + '</span></td><td class="hidden md:table-cell px-4 py-4 text-gray-600">' + (c.location ? esc(c.location) : '-') + '</td><td class="px-3 md:px-4 py-3 md:py-4"><div class="flex gap-1 md:gap-2"><button onclick="handleEditClick(' + c.id + ')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors" title="Edit"><svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg></button><button onclick="deleteFromDatabase(' + c.id + ')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors" title="Delete"><svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg></button></div></td></tr>';
                }
            }

            var catOpts = '<option value="All">All Categories</option>';
            for (var i = 0; i < categories.length; i++) {
                catOpts += '<option value="' + categories[i] + '" ' + (state.filterCategory === categories[i] ? 'selected' : '') + '>' + categories[i] + '</option>';
            }

            var html = '<div class="min-h-screen p-3 md:p-6 lg:p-8"><div class="max-w-7xl mx-auto"><div class="glass rounded-2xl shadow-custom p-4 md:p-6 lg:p-8 fade-in"><div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6"><div><h1 class="text-2xl md:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">Electronics Inventory</h1><div class="flex items-center gap-3 mt-2"><p class="text-gray-600 text-sm md:text-base">Total: <span class="font-bold text-purple-600">' + state.components.length + '</span> components</p>' + (state.dbConfig.url ? '<span class="inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>Connected</span>' : '') + '</div></div><div class="flex flex-wrap gap-2"><button onclick="loadFromDatabase()" class="flex-1 md:flex-none px-4 py-2 md:px-5 md:py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all transform hover:scale-105 font-medium shadow-md text-sm md:text-base flex items-center justify-center gap-2" ' + (state.loading ? 'disabled' : '') + '><svg class="w-4 h-4 md:w-5 md:h-5 ' + (state.loading ? 'spin' : '') + '" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg><span class="hidden sm:inline">Refresh</span></button><button onclick="state.showSetupModal=true;render()" class="flex-1 md:flex-none px-4 py-2 md:px-5 md:py-2.5 bg-gray-700 text-white rounded-xl hover:bg-gray-800 transition-all transform hover:scale-105 font-medium shadow-md text-sm md:text-base flex items-center justify-center gap-2"><svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/></svg><span class="hidden sm:inline">Config</span></button><button onclick="state.showAddModal=true;render()" class="w-full md:w-auto px-4 py-2 md:px-6 md:py-2.5 gradient-bg text-white rounded-xl hover:opacity-90 transition-all transform hover:scale-105 font-semibold shadow-lg text-sm md:text-base flex items-center justify-center gap-2"><svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>Add Component</button></div></div>';

            if (lowStock > 0) {
                html += '<div class="bg-gradient-to-r from-orange-50 to-red-50 border-l-4 border-orange-400 rounded-lg p-4 mb-6 shadow-sm"><div class="flex items-start gap-3"><svg class="w-5 h-5 md:w-6 md:h-6 text-orange-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><div><p class="font-semibold text-orange-800 text-sm md:text-base">Low Stock Alert</p><p class="text-orange-700 text-sm mt-1"><strong>' + lowStock + '</strong> component(s) running low (≤5 units)</p></div></div></div>';
            }

            html += '<div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4 mb-6"><div class="relative"><svg class="absolute left-3 md:left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg><input type="text" id="searchInput" placeholder="Search components..." value="' + esc(state.searchTerm) + '" class="w-full pl-10 md:pl-12 pr-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors text-sm md:text-base"/></div><select id="categorySelect" class="px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors font-medium text-sm md:text-base">' + catOpts + '</select></div><div class="overflow-x-auto -mx-4 md:mx-0 rounded-xl"><div class="inline-block min-w-full align-middle"><div class="overflow-hidden"><table class="min-w-full"><thead><tr class="bg-gradient-to-r from-purple-500 to-indigo-500 text-white"><th class="px-3 md:px-4 py-3 md:py-4 text-left text-xs md:text-sm font-bold uppercase tracking-wider">Name</th><th class="px-3 md:px-4 py-3 md:py-4 text-left text-xs md:text-sm font-bold uppercase tracking-wider">Category</th><th class="px-3 md:px-4 py-3 md:py-4 text-left text-xs md:text-sm font-bold uppercase tracking-wider">Value</th><th class="px-3 md:px-4 py-3 md:py-4 text-left text-xs md:text-sm font-bold uppercase tracking-wider">Qty</th><th class="hidden md:table-cell px-4 py-4 text-left text-sm font-bold uppercase tracking-wider">Location</th><th class="px-3 md:px-4 py-3 md:py-4 text-left text-xs md:text-sm font-bold uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-100">' + rows + '</tbody></table></div></div></div></div></div>';

            if (state.showSetupModal) {
                html += '<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm" onclick="if(event.target===this){state.showSetupModal=false;render()}"><div class="glass rounded-2xl p-4 md:p-6 lg:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-custom fade-in" onclick="event.stopPropagation()"><h2 class="text-xl md:text-2xl lg:text-3xl font-bold mb-4 md:mb-6 bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">Database Configuration</h2><div class="space-y-4 md:space-y-5"><div><label class="block text-sm md:text-base font-semibold text-gray-700 mb-2">Supabase Project URL</label><input type="text" value="' + esc(state.dbConfig.url) + '" oninput="state.dbConfig.url=this.value" class="w-full px-3 md:px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors text-sm md:text-base" placeholder="https://xxxxx.supabase.co"/></div><div><label class="block text-sm md:text-base font-semibold text-gray-700 mb-2">Supabase API Key (anon public)</label><input type="text" value="' + esc(state.dbConfig.key) + '" oninput="state.dbConfig.key=this.value" class="w-full px-3 md:px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors text-sm md:text-base" placeholder="eyJhbGc..."/></div><div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-400 rounded-lg p-4 md:p-5"><p class="font-bold text-blue-800 mb-3 text-sm md:text-base">Setup Instructions:</p><ol class="list-decimal list-inside space-y-2 text-blue-700 text-xs md:text-sm"><li>Create free account at <span class="font-semibold">supabase.com</span></li><li>Create a new project</li><li>Go to Settings → API</li><li>Copy Project URL and anon public key</li><li>Run this SQL in SQL Editor:</li></ol><pre class="bg-gray-900 text-green-400 p-3 md:p-4 rounded-lg mt-3 text-xs overflow-x-auto font-mono">CREATE TABLE components (\n  id BIGSERIAL PRIMARY KEY,\n  name TEXT NOT NULL,\n  category TEXT NOT NULL,\n  value TEXT,\n  quantity INTEGER NOT NULL,\n  location TEXT,\n  notes TEXT,\n  date_purchased DATE,\n  date_added TIMESTAMPTZ DEFAULT NOW()\n);</pre></div></div><div class="flex flex-col sm:flex-row gap-3 mt-6"><button onclick="saveDbConfig()" class="flex-1 gradient-bg text-white py-3 md:py-3.5 rounded-xl hover:opacity-90 transition-all transform hover:scale-105 font-bold shadow-lg text-sm md:text-base">Save Configuration</button><button onclick="state.showSetupModal=false;render()" class="flex-1 bg-gray-200 text-gray-800 py-3 md:py-3.5 rounded-xl hover:bg-gray-300 transition-all font-semibold text-sm md:text-base">Cancel</button></div></div></div>';
            }

            if (state.showAddModal) {
                var catFormOpts = '';
                for (var i = 0; i < categories.length; i++) {
                    catFormOpts += '<option value="' + categories[i] + '" ' + (state.formData.category === categories[i] ? 'selected' : '') + '>' + categories[i] + '</option>';
                }
                html += '<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm" onclick="if(event.target===this)resetForm()"><div class="glass rounded-2xl p-4 md:p-6 lg:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-custom fade-in" onclick="event.stopPropagation()"><h2 class="text-xl md:text-2xl lg:text-3xl font-bold mb-4 md:mb-6 bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">' + (state.editingId ? 'Edit' : 'Add New') + ' Component</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-5"><div><label class="block text-sm md:text-base font-semibold text-gray-700 mb-2">Component Name *</label><input type="text" value="' + esc(state.formData.name) + '" oninput="state.formData.name=this.value" class="w-full px-3 md:px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors text-sm md:text-base" placeholder="Arduino Uno"/></div><div><label class="block text-sm md:text-base font-semibold text-gray-700 mb-2">Category *</label><select onchange="state.formData.category=this.value" class="w-full px-3 md:px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors font-medium text-sm md:text-base">' + catFormOpts + '</select></div><div><label class="block text-sm md:text-base font-semibold text-gray-700 mb-2">Value/Specification</label><input type="text" value="' + esc(state.formData.value) + '" oninput="state.formData.value=this.value" class="w-full px-3 md:px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors text-sm md:text-base" placeholder="10kΩ, 16x2"/></div><div><label class="block text-sm md:text-base font-semibold text-gray-700 mb-2">Quantity *</label><input type="number" value="' + esc(state.formData.quantity) + '" oninput="state.formData.quantity=this.value" class="w-full px-3 md:px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors text-sm md:text-base" min="0"/></div><div><label class="block text-sm md:text-base font-semibold text-gray-700 mb-2">Storage Location</label><input type="text" value="' + esc(state.formData.location) + '" oninput="state.formData.location=this.value" class="w-full px-3 md:px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors text-sm md:text-base" placeholder="Box A, Drawer 3"/></div><div><label class="block text-sm md:text-base font-semibold text-gray-700 mb-2">Date Purchased</label><input type="date" value="' + esc(state.formData.datePurchased) + '" oninput="state.formData.datePurchased=this.value" class="w-full px-3 md:px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors text-sm md:text-base"/></div><div class="md:col-span-2"><label class="block text-sm md:text-base font-semibold text-gray-700 mb-2">Notes</label><textarea oninput="state.formData.notes=this.value" class="w-full px-3 md:px-4 py-2.5 md:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 transition-colors text-sm md:text-base resize-none" rows="3" placeholder="Additional information...">' + esc(state.formData.notes) + '</textarea></div></div><div class="flex flex-col sm:flex-row gap-3 mt-6"><button onclick="' + (state.editingId ? 'handleUpdateComponent()' : 'handleAddComponent()') + '" class="flex-1 gradient-bg text-white py-3 md:py-3.5 rounded-xl hover:opacity-90 transition-all transform hover:scale-105 font-bold shadow-lg text-sm md:text-base">' + (state.editingId ? 'Update' : 'Add') + ' Component</button><button onclick="resetForm()" class="flex-1 bg-gray-200 text-gray-800 py-3 md:py-3.5 rounded-xl hover:bg-gray-300 transition-all font-semibold text-sm md:text-base">Cancel</button></div></div></div>';
            }

            html += '</div>';
            app.innerHTML = html;
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
